## 03-12306的解决方案
### 一，问题分析：
#### 1，并发量大，大量的数据库读取操作
#### 2，大量的用户同时在线

### 二，优化目标
- 12306要支持 n 个 用户同时在线
- 12306需要支持 m/s 的查询
- 12306需要支持 p/s 的订单提交
- 12306需要支持 q/s 的支付

#### 1，登陆验证
尽可能的过滤掉一大批爬虫访问。减少服务器压力

#### 2，购票（抢票）
将票的数量的数据放到缓存中，假如说一个行程的票资源是10，有1000个人访问，当缓存的数值为1的时候，990的访问将被拦截在缓存这一层，减少了服务器的压力。
代码层的实现，使用自旋锁来解决原子问题，而且插入购票记录要先于更新票的数量的减少的操作，因为这样可以减少更新操作，数据库锁持有的时间，更加提高高并发的性能。

#### 3，缓存做主备，读写分离
#### 4，服务器要合理分布，负载均衡，尽量分散IO，分散服务器的压力，